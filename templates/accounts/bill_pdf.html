<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Milk Bill - {{ customer.name }}</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body{
      font-family: Arial, Helvetica, sans-serif;
      background:#f5f5f5;
      color:#111;
    }

    .bill{
      max-width:800px;
      margin:24px auto;
      background:#fff;
      padding:28px;
    }

    h3{
      margin-bottom:4px;
      font-weight:700;
    }

    .meta{
      font-size:14px;
      color:#555;
      margin-bottom:20px;
    }

    /* CLEAN TABLE – NO BOXES */
    table{
      width:100%;
      border-collapse:collapse;
      margin-top:12px;
    }

    thead th{
      font-size:13px;
      font-weight:600;
      color:#555;
      text-transform:uppercase;
      padding:6px 4px;
      border-bottom:2px solid #000;
    }

    tbody td{
      padding:6px 4px;
      font-size:14px;
      border-bottom:1px solid #e5e5e5;
    }

    tbody tr:last-child td{
      border-bottom:none;
    }

    .text-end{
      text-align:right;
    }

    /* TOTALS */
    .totals{
      margin-top:24px;
      width:100%;
      max-width:320px;
      margin-left:auto;
      font-size:14px;
    }

    .totals div{
      display:flex;
      justify-content:space-between;
      padding:4px 0;
    }

    .totals .grand{
      font-size:18px;
      font-weight:700;
      border-top:2px solid #000;
      padding-top:8px;
      margin-top:8px;
    }

    /* PRINT */
    @media print{
      body{background:#fff}
      .no-print{display:none}
    }
  </style>
</head>

<body>

<div class="bill">

  <h3>
    Milk Bill – {{ customer.name }}
    {% if period_label %}<small>({{ period_label }})</small>{% endif %}
  </h3>

  <div class="meta">
    Phone: {{ customer.phone|default:"N/A" }} |
    WhatsApp: {{ customer.whatsapp_number|default:"N/A" }}
  </div>

  <table>
    <thead>
      <tr>
        <th>Date</th>
        <th class="text-end">Qty (ml)</th>
        <th class="text-end">Litres</th>
        <th class="text-end">Amount (₹)</th>
      </tr>
    </thead>
    <tbody>
      {% for entry in entries %}
      <tr>
        <td>{{ entry.date|date:"d-m-Y" }}</td>
        <td class="text-end">{{ entry.quantity_ml }}</td>
        <td class="text-end">{{ entry.litres|floatformat:3 }}</td>
        <td class="text-end">₹ {{ entry.amount|floatformat:2 }}</td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="4" class="text-center">No entries found</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <div class="totals">
    <div>
      <span>Total ML</span>
      <span>{{ total_ml }} ml</span>
    </div>
    <div>
      <span>Total Litres</span>
      <span>{{ total_litres }} L</span>
    </div>
    <div class="grand">
      <span>Total Amount</span>
      <span>₹ {{ total_amount }}</span>
    </div>
  </div>

</div>

<div class="text-center no-print mt-3">
  <button onclick="window.print()" class="btn btn-primary">Print / Save PDF</button>
  <a class="btn btn-secondary" href="{% url 'accounts:customer_list' %}">Back</a>
</div>

</body>
</html>
